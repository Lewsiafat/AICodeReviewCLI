# AI 程式碼審查 CLI

這是一個強大的命令列介面 (CLI) 工具，旨在利用人工智慧自動化並增強您的程式碼審查流程。它能無縫地與 **Git 儲存庫**和**本地資料夾**協同工作，並利用 **Google**、**OpenAI** 等供應商的大型語言模型，為您的程式碼提供富有洞察力的回饋。

## 功能

*   **多供應商支援**：原生支援不同的 AI 供應商，目前包含 Google (Gemini 模型) 和 OpenAI (GPT 模型)。
*   **互動式介面**：使用者友善的選單式介面將引導您完成整個設定與審查過程。
*   **雙審查模式**：選擇最符合您需求的模式：
    *   **Git 模式**：基於 Git 歷史紀錄分析程式碼變更，非常適合審查功能分支或個別提交。
    *   **資料夾模式**：直接審查您本地檔案系統中的檔案和資料夾，適用於未受版本控制的專案，或對尚未提交的程式碼獲取回饋。
*   **靈活的配置與使用**：
    *   **供應商優先的設定**：以互動方式設定您偏好的 AI 供應商、API 金鑰和預設模型。
    *   **執行時模型選擇**：在進行任何審查時，您可以選擇使用預設模型，或為該次任務臨時選擇不同的供應商或模型。
    *   **即時儲存偏好**：如果您喜歡在某次工作階段中使用的模型，可以立即將其儲存為新的預設值。
*   **可自訂的提示**：透過修改 `prompts/` 目錄中簡單的 Markdown 檔案，來自訂 AI 的審查指令。
*   **效率與控制**：
    *   *空差異檢查*：自動跳過沒有實際程式碼變更的提交，以節省時間和 API 成本。
    *   *除錯模式*：提供 `--debug` 選項，讓您可以看到發送給 AI 的確切數據而無需實際呼叫 API。

## 前置準備

在開始之前，請確保您的系統上已安裝以下軟體：

*   **Python**：版本 3.9 或更高。([下載 Python](https://www.python.org/downloads/))
*   **uv**：一個快速的 Python 套件安裝器和解析器。([安裝 uv](https://astral.sh/uv/install.sh))
*   **Git**：若要使用 Git 模式則必須安裝。([下載 Git](https://git-scm.com/downloads))

## 設定與安裝

請按照以下步驟設定並運行 AI 程式碼審查 CLI：

1.  **複製儲存庫**
2.  **導航到專案目錄**
3.  **建立並啟用虛擬環境**：
    ```bash
    uv venv
    source .venv/bin/activate
    ```
4.  **安裝依賴項**：此指令會安裝所有必要的套件，包含 `google-generativeai` 和 `openai`。
    ```bash
    uv pip install -e .
    ```

## 配置

本工具使用 `.env` 檔案來儲存您的設定。首次執行或使用 `--config` 參數時，程式會引導您完成互動式設定：

1.  **選擇預設供應商**：選擇您偏好的預設 AI 供應商（例如 "Google" 或 "OpenAI"）。
2.  **輸入 API 金鑰**：提供您所選供應商的 API 金鑰。它將被安全地儲存在您的 `.env` 檔案中（例如，存為 `GOOGLE_API_KEY` 或 `OPENAI_API_KEY`）。
3.  **選擇預設模型**：從程式從供應商處動態獲取的模型列表中，選擇一個作為您的預設模型。

`.env` 檔案將由本工具自動管理。

## 使用方式

設定完成後，從專案根目錄運行工具：

```bash
python -m codereview_tool.cli [--debug] [--config]
```

工具將引導您完成以下互動步驟：

1.  **確認或選擇 AI 模型**：程式會詢問您是否要使用已儲存的預設模型。如果選擇「否」，您可以為當前任務選擇一個不同的供應商和模型。
2.  **選擇專案路徑**：輸入您要審查的專案的絕對路徑。
3.  **選擇審查模式**：在 **Git 模式**和**資料夾模式**之間進行選擇。
4.  **後續步驟**：根據您選擇的模式，工具將引導您完成進一步的選擇（例如，在 Git 模式中選擇提交，或在資料夾模式中選擇檔案）。

